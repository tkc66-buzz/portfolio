# Feature Specification: Mobile Menu Fix

**Feature Branch**: `038-mobile-menu-fix`
**Created**: 2026-01-10
**Status**: Clarified
**Input**: User description: "スマホからportfolioサイトにアクセスした際にmenu barの上が見切れてしまうので、menu barをもっと下にするか、スマホの場合は非表示にするでよさそう"

## Problem Statement

スマートフォンでポートフォリオサイトにアクセスすると、メニューバーの上部が画面から見切れてしまう問題が発生している。

### 現状の実装
- メニューバーは `sticky` で `top: var(--menu-top)` に配置
- モバイル: `--menu-top: 0.75rem` (12px)
- デスクトップ: `--menu-top: 1rem` (16px)

### 採用する解決策
**ハンバーガーメニュー（折りたたみ式）** - モバイルでは折りたたみ式のハンバーガーメニューに変更し、画面スペースを確保しつつナビゲーション機能を維持する。

## User Scenarios & Testing *(mandatory)*

### User Story 1 - Mobile User Views Page (Priority: P1)

スマートフォンユーザーがポートフォリオサイトにアクセスした際、ハンバーガーメニューが表示され、タップすることでナビゲーションメニューにアクセスできる。

**Why this priority**: モバイルユーザーのUX改善が主目的

**Independent Test**: スマートフォン（または開発者ツールのモバイルビュー）でサイトにアクセスし、メニューバーの表示を確認する

**Acceptance Scenarios**:

1. **Given** モバイルデバイスでサイトにアクセス, **When** ページを表示, **Then** ハンバーガーアイコンが表示される
2. **Given** モバイルデバイスでハンバーガーアイコンが表示されている, **When** アイコンをタップ, **Then** メニューが展開されナビゲーション項目が表示される
3. **Given** メニューが展開されている, **When** セクションをタップ, **Then** 該当セクションへスクロールしメニューが閉じる

---

### User Story 2 - Desktop User Experience Unchanged (Priority: P2)

デスクトップユーザーの体験は変更なく、従来通りメニューバーが正常に機能する。

**Why this priority**: 既存機能の回帰防止

**Independent Test**: デスクトップブラウザでサイトにアクセスし、メニューバーが従来通り動作することを確認

**Acceptance Scenarios**:

1. **Given** デスクトップでサイトにアクセス, **When** ページをスクロール, **Then** メニューバーがstickyで画面上部に固定表示される

---

### Edge Cases

- タブレット（640px以上）では従来の横並びメニューを表示
- 横向き（landscape）モードで640px以上になる場合は横並びメニューに切り替わる
- メニュー展開中に画面回転した場合は自動的に閉じて適切なUIに切り替わる
- reduced-motion設定時はアニメーションを無効化する

## Requirements *(mandatory)*

### Functional Requirements

- **FR-001**: モバイルではハンバーガーメニュー（折りたたみ式）を表示すること
- **FR-002**: デスクトップでの既存動作は維持すること（現行の横並びメニュー）
- **FR-003**: ハンバーガーアイコンをタップするとメニューが展開されること
- **FR-004**: ハンバーガーアイコンは画面右上に固定表示すること
- **FR-005**: メニュー展開時はフルスクリーンオーバーレイで表示すること（ゲームメニュー風）
- **FR-006**: メニュー展開中は背景コンテンツへのスクロール・操作を無効化すること
- **FR-007**: 閉じるボタン（×）またはメニュー項目タップでメニューを閉じられること
- **FR-008**: 画面幅640px未満でハンバーガーメニュー、640px以上で従来の横並びメニューを表示すること

## Clarifications

### Session 2026-01-10

- Q: モバイルでのメニューバーの問題解決として、どのアプローチを採用しますか？ → A: ハンバーガーメニュー（折りたたみ式）に変更
- Q: ハンバーガーメニューのアイコンはどこに配置しますか？ → A: 右上に固定
- Q: メニュー展開時の表示スタイルはどうしますか？ → A: フルスクリーンオーバーレイ（ゲームメニュー風）
- Q: ハンバーガーメニューに切り替えるブレークポイントは？ → A: 640px未満（Tailwind sm未満）

## Success Criteria *(mandatory)*

### Measurable Outcomes

- **SC-001**: モバイルでハンバーガーメニューが正常に表示・動作する
- **SC-002**: デスクトップでの動作に変更なし
- **SC-003**: Lighthouse アクセシビリティスコアが低下しないこと
